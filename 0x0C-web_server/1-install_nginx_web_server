#!/usr/bin/env bash
#install ngix and have a file that returns the string "Hello World  inside

#update and install nginx
sudo apt-get -y update

if ! sudo apt-get install -y nginx;
then
    echo "Installation Dropped"
    exit 1
else
    #make the web dir
    sudo mkdir -p /var/www/alx/html
    #change ownership of the folder
    sudo chown -R $USER:$USER /var/www/alx/html
    sudo chmod -R 755 /var/www/alx/html
    #create the index file
    sudo echo "$INDEX_FILE" > /var/www/alx/html/index.html
    #make the config file
    sudo sed -i 's/listen\ \[::\]:80\ default_server;/listen\ 80\ default_server;/g' /etc/nginx/sites-available/default
    #allow traffic through the firewall
    sudo ufw allow 'Nginx HTTP'
    #restart nginx
    sudo service nginx restart
    exit 0
fi
