#!/usr/bin/env bash
#install ngix and have a file that returns the string "Hello World  inside
if ! sudo apt update -y && sudo apt install -y nginx-full;
then
    echo "Could not install nginx"
    exit 1   
else
    #create the web directory
    sudo mkdir -p /var/www/html
    #configure firewall to allow both http and https traffic
    sudo ufw allow 'nginx full'
    sudo ufw reload
    #configure ownership and permissions
    sudo chown -R "$USER":"$USER" /var/www
    sudo chmod -R 755 /var/www
    #creating an index file to be displayed on the browser
    echo "Hello World!" > /var/www/alx/index.html
    #Starting the service
    if ! sudo service nginx start;
    then
            echo "Problem starting nginx"
            exit 1
        else
            echo "Nginx is running"
            exit 0
        fi
fi
